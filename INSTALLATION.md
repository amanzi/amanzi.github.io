# Installation

This website is built with [Gatsby](https://gatsbyjs.com), a static site generator with Markdown-based websites and a rich ecosystem of plugins.

## Directory Overview

```sh
$ tree -L 1
.
├── assets              # Website assets: favicon, logo, etc.
├── CHANGELOG.md
├── content             # Markdown/webpage 'home'
├── gatsby-config.js    # Sitewide configuration file
├── INSTALLATION.md
├── package.json        # Website dependencies: uses Yarn to install
├── README.md
├── src                 # Theme & custom components source files
├── static              # static files: PDFs, BibTeX, etc.
└── yarn.lock           # Locks dependencies to specific version
```

## Installing Dependencies
##### Instructions sourced from [the Gatsby documentation](https://www.gatsbyjs.com/docs/tutorial/part-0/#set-default-nodejs-version).

```sh
# Upgrade apt
$ sudo apt update
$ sudo apt -y upgrade
$ sudo apt-get install -y curl git

# Install NVM
$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.1/install.sh | bash
$ nvm install 14
$ nvm use 14

# Check versions
$ nvm --version
$ node --version
$ npm --version
```

## Installing Gatsby

```sh
$ npm install -g gatsby-cli
$ gatsby --version
$ gatsby --help
```

## Compiling the website
### Development Version

Gatsby has a development mode which allows for live previewing and change monitoring. To run,

```sh
$ gatsby develop
```

The console will show output similar to:

```txt
You can now view gatsby-starter-flex in the
browser.
⠀
  http://localhost:8000/
⠀
View GraphiQL, an in-browser IDE, to explore your
site's data and schema
⠀
  http://localhost:8000/___graphql
```

Navigate to [http://localhost:8000/](http://127.0.0.1:8000/) to view the website.

### Production Version

To build the production version, run:

```sh
$ gatsby build
```

Note that content **may not render correctly when viewing these built files locally**. This is due to how relative/absolute URLs are generated by Gatsby - viewing them on an actual web server is the best way to verify content, outside of `gatsby develop`.

## Deploying to GitHub Pages

The configured [GitHub Action](./.github/gatsby_build.yml) should automatically deploy changes to the `gh-pages` branch.

## Developer Notes
### Rendering in VS Code

Visual Studio Code has a plugin called [Live Preview](https://marketplace.visualstudio.com/items?itemName=ms-vscode.live-server) which simplifies web development. After installing the plugin, open the packages pane (on Mac: `⌘ + shift + P`) and launch `Live Preview: Start Server`.

### Adding New Pages

Existing pages can be found under `./content/pages/`, and take the form `page-name/index.mdx`. MDX is an extension of Markdown with support for React.js components.

For more information, see:

- [MDX.js](https://mdxjs.com)
- [Gatsby Docs: Add components to content using MDX](https://www.gatsbyjs.com/docs/how-to/routing/mdx/)